<div class="space-y-6">
  <header>
    <h1 class="text-2xl font-semibold tracking-tight text-slate-900"><%= t("billing.credits.show.title") %></h1>
    <p class="mt-1 text-sm text-slate-600"><%= t("billing.credits.show.subtitle") %></p>
  </header>

  <%# Current balance card %>
  <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
    <h2 class="text-sm font-semibold text-slate-800"><%= t("billing.credits.show.balance_title") %></h2>
    <div class="mt-3 grid gap-4 sm:grid-cols-2">
      <div>
        <p class="text-xs text-slate-500"><%= t("billing.credits.show.purchased_balance") %></p>
        <p class="mt-1 text-2xl font-bold text-slate-900"><%= @credit&.balance || 0 %></p>
      </div>
      <% if @subscription&.plan&.feature?(:whatsapp_included_quota) %>
        <div>
          <p class="text-xs text-slate-500"><%= t("billing.credits.show.monthly_quota") %></p>
          <p class="mt-1 text-2xl font-bold text-slate-900"><%= @credit&.monthly_quota_remaining || 0 %></p>
        </div>
      <% end %>
    </div>
  </div>

  <%# Purchase bundles %>
  <div class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm">
    <h2 class="mb-4 text-sm font-semibold text-slate-800"><%= t("billing.credits.show.purchase_title") %></h2>
    <div class="grid gap-4 sm:grid-cols-3">
      <% [[50, "R$ 25,00"], [100, "R$ 45,00"], [200, "R$ 80,00"]].each do |amount, price| %>
        <div class="rounded-lg border border-slate-200 p-4 text-center">
          <p class="text-2xl font-bold text-slate-900"><%= amount %></p>
          <p class="text-sm text-slate-500"><%= t("billing.credits.show.credits") %></p>
          <p class="mt-1 text-sm font-medium text-slate-700"><%= price %></p>
          <%= button_to t("billing.credits.show.purchase"),
                        settings_credits_path,
                        method: :post,
                        params: { amount: amount },
                        class: "mt-3 w-full rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700" %>
        </div>
      <% end %>
    </div>
  </div>

  <%# Credit usage history %>
  <% if @events.any? %>
    <div class="rounded-xl border border-slate-200 bg-white shadow-sm">
      <div class="border-b border-slate-200 px-5 py-3">
        <h2 class="text-sm font-semibold text-slate-800"><%= t("billing.credits.show.history_title") %></h2>
      </div>
      <ul class="divide-y divide-slate-200">
        <% @events.each do |event| %>
          <li class="flex items-center justify-between px-5 py-3">
            <span class="text-sm text-slate-700"><%= event.event_type.humanize %></span>
            <span class="text-xs text-slate-400"><%= l(event.created_at, format: :long) %></span>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
</div>
